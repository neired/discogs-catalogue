(this["webpackJsonpdiscogs-catalogue"]=this["webpackJsonpdiscogs-catalogue"]||[]).push([[0],{168:function(e,t,a){e.exports=a(266)},173:function(e,t,a){},174:function(e,t,a){},236:function(e,t,a){},237:function(e,t,a){},254:function(e,t,a){},261:function(e,t,a){},266:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(26),c=a.n(l),s=a(97),i=a(98),o=a(51),m=a(115),u=a(113),d=a(79),h=a(34),g=a(72),p=a.n(g),E=a(116),f="WQcFMnNpoKKKPWCLQbUQKCcXGSNYUkGMqaWkfzmd",v={method:"GET",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Discogs token=".concat(f)}},y={method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Discogs token=".concat(f)}},b=function(){var e=Object(E.a)(p.a.mark((function e(t,a){var n,r,l,c,s=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>2&&void 0!==s[2]?s[2]:1,r=s.length>3&&void 0!==s[3]?s[3]:12,l="https://api.discogs.com/database/search?type=".concat(a,"&q=").concat(t,"&per_page=").concat(r,"&page=").concat(n),e.prev=3,e.next=6,fetch(l,v);case 6:return c=e.sent,e.abrupt("return",c.json());case 10:return e.prev=10,e.t0=e.catch(3),e.abrupt("return",console.log("Looks like there was a problem!",e.t0));case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t,a){return e.apply(this,arguments)}}(),k=function(){var e=Object(E.a)(p.a.mark((function e(){var t,a,n,r,l=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:1,a=l.length>1&&void 0!==l[1]?l[1]:12,n="https://api.discogs.com/users/neired/collection/folders/0/releases?per_page=".concat(a,"&page=").concat(t),e.prev=3,e.next=6,fetch(n,v);case 6:return r=e.sent,e.abrupt("return",r.json());case 10:return e.prev=10,e.t0=e.catch(3),e.abrupt("return",console.log("Looks like we couldn't retrieve your collection!",e.t0));case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=Object(E.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="https://api.discogs.com/users/neired/collection/folders/1/releases/".concat(t),e.prev=1,e.next=4,fetch(a,y);case 4:return n=e.sent,e.abrupt("return",n.json());case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",console.log("We couldn't add that item to your collection!",e.t0));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),w=(a(173),a(269)),P=a(273),S=a(268),C=a(271),x=a(281),j=a(270),O=a(267),z=a(85),T=a(52),A=a(272),D=a(276),Q=a(71),M=(a(174),a(279)),R=a(280),B=function(e){var t=e.data,a=e.addToCollection,n=P.a.Title,l=j.a.Meta,c="https://generative-placeholders.glitch.me/image?width=150&height=150&style=tiles&colors=40";return r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,{orientation:"left"},r.a.createElement(n,{level:2},"release"===t[0].type?"Albums":"Artists")),r.a.createElement(z.a,{gutter:[0,24]},t.map((function(e,n){return r.a.createElement(T.a,{xs:12,sm:6,md:4,lg:3,key:e.id},r.a.createElement(d.b,{to:"/".concat(e.type,"/").concat(e.id),className:""},r.a.createElement(j.a,{hoverable:!0,bordered:!1,cover:e.country?r.a.createElement(A.a,{width:100,alt:"Album cover",src:e.thumb,fallback:"".concat(c,"&img=").concat(n)}):r.a.createElement(D.a,{className:"list-avatar",gap:0,size:100,src:e.thumb||"".concat(c,"&img=").concat(n),icon:r.a.createElement(M.a,null)})},r.a.createElement(l,{title:e.title,description:e.country?"".concat(e.country," - ").concat(e.year):""}))),"release"===t[0].type&&r.a.createElement(Q.a,{size:"small",className:"add-btn",type:"primary",shape:"circle",icon:r.a.createElement(R.a,null),onClick:function(){return a(e.id)}}))}))))},q=a(278),_=(a(236),a(274)),L=(a(237),function(e){var t=e.current;return r.a.createElement(_.a,{className:"breadcrumb"},r.a.createElement(_.a.Item,null,r.a.createElement("a",{href:"/"},"Home")),r.a.createElement(_.a.Item,null,t))}),W=function(e){var t=P.a.Title,a=P.a.Paragraph;return r.a.createElement(j.a,{className:"detail-card"},r.a.createElement("div",{className:"detail-header"},r.a.createElement(A.a,{className:"detail-img",width:150,src:"https://generative-placeholders.glitch.me/image?width=150&height=150&style=tiles&colors=40"}),r.a.createElement("div",{className:"detail-header-text"},r.a.createElement(t,{level:2},"Oops... Something went wrong!"),r.a.createElement(a,null,"Looks like the artist or album you are looking for doesn't exist yet..."),r.a.createElement(a,null,"Have you ever considered starting a band with that name?"))))},I=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={item:"",loading:!0,error:!1},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.routerProps,t=parseInt(e.match.params.detailID),a=e.match.params.detailType||"release";this.fetchDetail(a,t)}},{key:"fetchDetail",value:function(e,t){var a=this,n="https://api.discogs.com/".concat(e,"s/").concat(t);fetch(n,v).then((function(e){return e.json()})).catch((function(e){console.log("Oops!",e),a.setState({error:!0})})).then((function(e){a.setState({item:e,loading:!1})}))}},{key:"render",value:function(){var e=this.state,t=e.item,a=e.loading,n=e.error,l=P.a.Title,c=P.a.Text,s=P.a.Paragraph,i="https://generative-placeholders.glitch.me/image?width=150&height=150&style=tiles&colors=40";if(t&&t.name)return r.a.createElement("div",{className:"detail-section"},r.a.createElement(L,{current:t.name}),r.a.createElement(j.a,{className:"detail-card"},r.a.createElement("div",{className:"detail-header"},r.a.createElement(A.a,{className:"detail-img",size:150,width:150,src:t.images?t.images[0].resource_url:i}),r.a.createElement("div",{className:"detail-header-text"},r.a.createElement(l,{level:2},t.name),t.namevariations&&r.a.createElement(c,null,r.a.createElement("span",{className:"default-text"},"Also known as:")," ",t.namevariations.join(", ")))),r.a.createElement(s,{className:"detail-description",ellipsis:{rows:3,expandable:!0,symbol:"more"}},t.profile),t.members&&r.a.createElement(z.a,null,t.members&&t.members.map((function(e){return r.a.createElement(T.a,{xs:24,sm:12,md:6,lg:5,className:"detail-members",key:e.id},r.a.createElement(q.b,{size:"middle"},r.a.createElement(D.a,{size:50,src:e.thumbnail_url||i}),r.a.createElement(c,null,e.name)))})))));if(t&&t.title){var o=[];return t.artists&&t.artists.map((function(e){return o.push(e.name)})),r.a.createElement("div",{className:"detail-section"},r.a.createElement(L,{current:t.title}),r.a.createElement(j.a,{className:"detail-card"},r.a.createElement("div",{className:"detail-header"},r.a.createElement(A.a,{className:"detail-img",size:150,width:150,src:t.images?t.images[0].resource_url:i}),r.a.createElement("div",{className:"detail-header-text"},r.a.createElement(l,{level:2},t.title," ",r.a.createElement("span",{className:"default-text"},"by")," ",o.join(", ")),r.a.createElement(s,null,r.a.createElement("span",{className:"default-text"},"Year:")," ",t.year),t.styles&&r.a.createElement(s,null,r.a.createElement("span",{className:"default-text"},"Styles:")," ",t.styles.join(", ")),t.genres&&r.a.createElement(s,null,r.a.createElement("span",{className:"default-text"},"Genres:")," ",t.genres.join(", ")))),r.a.createElement(s,{className:"detail-description",ellipsis:{rows:3,expandable:!0,symbol:"more"}},t.notes),t.tracklist&&r.a.createElement("ol",{className:"detail-list"},r.a.createElement("span",{className:"default-text"},"Tracklist:"),t.tracklist&&t.tracklist.map((function(e){return r.a.createElement("li",{className:"detail-list-item",key:e.position},r.a.createElement(q.b,{direction:"horizontal",split:"-"},r.a.createElement(c,null,e.title),r.a.createElement(c,null,e.duration&&r.a.createElement("span",null,e.duration))))})))))}return n?r.a.createElement("div",{className:"detail-section"},r.a.createElement(L,{current:"Error"}),r.a.createElement(W,null)):r.a.createElement(S.a,{className:"detail-spin",spinning:a,size:"large"})}}]),a}(r.a.Component),F=(a(254),a(277)),G=a(275),K=function(e){var t=e.searchByEnter,a=e.getQuery,n=e.query,l=e.getSearch,c=e.fetchQueryData,s=e.searchModes,i=e.isRelease,o=e.isArtist,m=P.a.Text;return r.a.createElement("div",{className:"filter-section"},o&&i?"":r.a.createElement(m,{className:"filter-text"},"Welcome to Discogs Catalogue, the largest online music database in the world."),r.a.createElement("label",{forhtml:"name"},r.a.createElement(F.a,{className:"filter-input",size:"large",placeholder:"Search by artist or album",onKeyPress:t,onChange:a,value:n})),r.a.createElement(T.a,{className:"filter-radio-group"},r.a.createElement(G.a.Group,{onChange:l,defaultValue:s[0].value},s.map((function(e,t){return r.a.createElement(G.a,{key:"filter_radio_".concat(t),value:e.value},e.label)})))),r.a.createElement(Q.a,{type:"primary",disabled:!n,onClick:c,size:"large",className:"search-btn"},"Search"))},H=(a(261),function(e){var t=e.data,a=e.pagination,n=e.changeCollectionPage,l=e.loading,c=P.a.Title,s=j.a.Meta;return r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,{orientation:"left"},r.a.createElement(c,{level:2},"My Collection")),r.a.createElement("div",{className:"collection-row"},r.a.createElement(S.a,{spinning:l,size:"large"}),t.map((function(e,t){return r.a.createElement(T.a,{key:t},r.a.createElement(d.b,{to:"/release/".concat(e.id),className:""},r.a.createElement(j.a,{hoverable:!0,bordered:!1,cover:r.a.createElement(A.a,{width:70,alt:"Album cover",src:e.basic_information.thumb,fallback:"https://generative-placeholders.glitch.me/image?width=150&height=150&style=tiles&colors=40"})},r.a.createElement(s,{title:e.basic_information.title,description:e.basic_information.year}))))}))),r.a.createElement(C.a,{hideOnSinglePage:!0,size:"small",showSizeChanger:!1,defaultCurrent:a.page,total:a.items,onChange:n,pageSize:25}))}),J=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).ref=r.a.createRef(),n.state={loading:!1,isCollectionLoading:!0,error:!1,artists:[],releases:[],collection:[],artistsPag:{},releasesPag:{},collectionPag:{},query:"",searchBy:["artist","release"],isArtist:!1,isRelease:!1},n.searchModes=[{label:"Both",value:"artist, release"},{label:"Artist",value:"artist,"},{label:"Album",value:",release"}],n.getQuery=n.getQuery.bind(Object(o.a)(n)),n.getSearch=n.getSearch.bind(Object(o.a)(n)),n.fetchQueryData=n.fetchQueryData.bind(Object(o.a)(n)),n.searchByEnter=n.searchByEnter.bind(Object(o.a)(n)),n.changeArtistPage=n.changeArtistPage.bind(Object(o.a)(n)),n.changeReleasePage=n.changeReleasePage.bind(Object(o.a)(n)),n.changeCollectionPage=n.changeCollectionPage.bind(Object(o.a)(n)),n.addToCollection=n.addToCollection.bind(Object(o.a)(n)),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;k().then((function(t){e.setState({collection:t.releases,collectionPag:t.pagination,isCollectionLoading:!1})}))}},{key:"getQuery",value:function(e){var t=e.currentTarget.value;this.setState({query:t})}},{key:"getSearch",value:function(e){var t=e.target.value.split(",");this.setState({searchBy:t})}},{key:"fetchQueryData",value:function(){var e=this;this.setState({loading:!0,error:!1,releases:[],releasesPag:{},artists:[],artistsPag:{},isRelease:!1,isArtist:!1});var t=this.state.searchBy.map((function(t){return t?b(e.state.query,t):Promise.resolve(null)}));Promise.all(t).then((function(t){console.log(t),t[0]&&(0===t[0].pagination.items?e.setState({error:!0,loading:!1}):e.setState({loading:!1,isArtist:!0,artists:t[0].results,artistsPag:t[0].pagination})),t[1]&&(0===t[1].pagination.items?e.setState({error:!0,loading:!1}):e.setState({loading:!1,isRelease:!0,releases:t[1].results,releasesPag:t[1].pagination}))}))}},{key:"searchByEnter",value:function(e){"Enter"===e.key&&this.fetchQueryData()}},{key:"changeArtistPage",value:function(e,t){var a=this;this.setState({loading:!0}),b(this.state.query,"artist",e,t).then((function(e){a.setState({loading:!1,artists:e.results,artistsPag:e.pagination})}))}},{key:"changeReleasePage",value:function(e,t){var a=this;this.setState({loading:!0}),b(this.state.query,"release",e,t).then((function(e){a.setState({loading:!1,releases:e.results,releasesPag:e.pagination})}))}},{key:"changeCollectionPage",value:function(e,t){var a=this;this.setState({loading:!0}),k(e,t).then((function(e){a.setState({loading:!1,collection:e.releases,collectionPag:e.pagination})}))}},{key:"addToCollection",value:function(e){var t=this;N(e).then((function(e){t.state.collection.push(e);var a=t.state.collectionPag.items+1;t.setState({collection:t.state.collection,collectionPag:a})}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.query,n=t.artists,l=t.releases,c=t.artistsPag,s=t.isCollectionLoading,i=t.loading,o=t.releasesPag,m=t.isArtist,u=t.isRelease,g=t.collection,p=t.collectionPag,E=t.error,f=w.a.Header,v=w.a.Footer,y=w.a.Content,b=P.a.Title,k=P.a.Text;return r.a.createElement(w.a,{className:"app"},r.a.createElement(f,{className:"header"},r.a.createElement(b,{level:1,className:"header-title"},r.a.createElement("a",{href:"/"},"Discogs Catalogue"))),r.a.createElement(y,null,r.a.createElement(d.a,null,r.a.createElement(h.c,null,r.a.createElement(h.a,{exact:!0,path:"/",render:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(K,{searchByEnter:e.searchByEnter,getQuery:e.getQuery,getSearch:e.getSearch,fetchQueryData:e.fetchQueryData,query:a,searchModes:e.searchModes,isArtist:m,isRelease:u}),E&&r.a.createElement(W,null),r.a.createElement(S.a,{spinning:i,size:"large"}),m&&r.a.createElement(B,{isArtist:m,data:n}),m&&r.a.createElement(C.a,{hideOnSinglePage:!0,size:"small",showSizeChanger:!1,current:c.page,total:c.items,onChange:e.changeArtistPage,pageSize:12}),u&&r.a.createElement(B,{isRelease:u,data:l,addToCollection:e.addToCollection}),u&&r.a.createElement(C.a,{hideOnSinglePage:!0,size:"small",showSizeChanger:!1,defaultCurrent:o.page,total:o.items,onChange:e.changeReleasePage,pageSize:12}),r.a.createElement(H,{data:g,pagination:p,loading:s,changeCollectionPage:e.changeCollectionPage}))}}),r.a.createElement(h.a,{path:"/:detailType/:detailID",render:function(e){return r.a.createElement(I,{routerProps:e,isArtist:m,isRelease:u})}})))),r.a.createElement(v,{className:"footer"},r.a.createElement(k,null,r.a.createElement("a",{href:"/"},"Discogs Catalogue")),r.a.createElement(k,null,"Made with ",r.a.createElement(x.a,null)," by ",r.a.createElement("a",{href:"https://github.com/neired"},"Natalia Mill\xe1n"))))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(J,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[168,1,2]]]);
//# sourceMappingURL=main.0e123d72.chunk.js.map